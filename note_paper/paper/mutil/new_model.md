+ 图输入改为动态图，图卷积 改为 动态图卷积      √
  + 先空间卷积，还是先动态图卷积
  + 弄明白动态图卷积是干啥的

+ 还是 $X_r$、$X_d$、$X_w$ 三种输入，
  + t 和 m 拆开分别输入不同的模型中       √
  
    > t 和 m 拆开 输入模型中
    >
    > ![image-20240618210528491](https://raw.githubusercontent.com/Quinlan7/pic_cloud/main/img/202406182105743.png)
    >
    > 问题： 作者的数据集中训练输入有两个维度的数据是交通流数据，一个是流入一个是流出，但是标签数据中只有流出车流量数据的预测值，训练结果也只有流出车流量，我现在输入的时候 流入车流量的数据集 是当作 多模态信息还是 主要特征的数据。
    >
    > HaiKou
    >
    > | 模型\结果                        | MAE    | RMSE   | MAPE   |
    > | -------------------------------- | ------ | ------ | ------ |
    > | MFFDSTGCN-200epoch               | 1.97   | 7.17   |        |
    > | MFFDSTGCN-1000epoch              | 3.59   | 14.05  |        |
    > | MFFDSTGCN-870epoch               | 1.41   | 4.80   |        |
    > | MFFDSTGCN-850epoch               | 1.5145 | 5.3820 | 0.4540 |
    > | MFFDSTGCN-850epoch-noAirQuality  | 1.6940 | 6.0739 | 0.4736 |
    > | MFFDSTGCN-850epoch-noHoliday     | 1.5949 | 5.5003 | 0.4697 |
    > | MFFDSTGCN-850epoch-noWeather     | 1.6443 | 5.7489 | 0.5271 |
    > | MFFDSTGCN-850epoch-noWind        | 1.8200 | 6.7797 | 0.5135 |
    > | MFFDSTGCN-850epoch-noTemperature | 2.4077 | 8.9624 | 0.5633 |
    > | MFFDSTGCN-2000epoch              | 1.1035 | 3.5433 | 0.4796 |
    >
    > HaiKou-ablation
    >
    > | 模型\结果                      | MAE    | RMSE   | MAPE   |
    > | ------------------------------ | ------ | ------ | ------ |
    > | MFFDSTGCN-850epoch             | 1.5145 | 5.3820 | 0.4540 |
    > | MFFDSTGCN-850epoch-noMFFmoudle | 1.7550 | 6.1579 | 0.4955 |
    > |                                |        |        |        |
    >
    > Yellowtrip
    >
    > | 模型\结果                    | MAE    | RMSE   | MAPE   |
    > | ---------------------------- | ------ | ------ | ------ |
    > | author                       | 2.18   | 6.27   | 无     |
    > | MFF-64B-dim32-runs1-850epoch | 1.5579 | 3.8317 | 0.4110 |
    > |                              |        |        |        |
    > |                              |        |        |        |
  
  + t 和 m 叠加输入相同模型                          √
  
    > a 和 p 叠加输入模型
    >
    > ![image-20240616160808741](https://raw.githubusercontent.com/Quinlan7/pic_cloud/main/img/202406161608905.png)
    >
    > 目前效果 怎么说呢。通过实践发现，由于是动态图，所以需要训练的epoch次数要更大才能效果更好。
    >
    > | 模型\结果                     | MAE  | RMSE  |
    > | ----------------------------- | ---- | ----- |
    > | DGC-32B-dim32-runs1           | 2.48 | 7.30  |
    > | DGC-32B-dim32-runs10          | 2.45 | 10.38 |
    > | DGC-16B-dim32-runs1           | 2.30 | 8.24  |
    > | DGC-64B-dim32-runs1           | 2.02 | 6.96  |
    > | DGC-64B-dim32-runs10          | 2.59 | 10.44 |
    > | DGC-128B-dim32-runs1          | 8.79 | 36.76 |
    > | DGC-64B-dim32-runs1-1000epoch | 2.28 | 7.87  |
    >
    > 
  
+ 时间卷积改进为内部改进为膨胀卷积（或空洞卷积）          √

> 在 WAVENET 中首次提出。
>
> 查了几篇文章中关于时间特征提取的部分，一部分是使用的RNN（LSTM或者GRU）来提取的时间特征，但是这样会严重的降低训练速度，所以我使用了膨胀卷积。与循环神经网络相比，膨胀卷积层可以并行计算，因此大大降低了时间复杂度。同时，==门控机制==在处理序列数据方面显示出优势，因此在时间卷积层中使用了门控机制以提高模型容量。

+ 跳跃链接
+ 在测试集的训练结果中加上 mape  mae                 √

> mae 加入完成
>
> 但是mape 无法实现，mape如果真实值存在0的话，会出现除零问题，这个数据集很多0。所以无法使用

+ 评价标准 加入 MAPE                                        √

> 实现工作量大，因为作者使用的是没人用过的数据集，别的模型的实验结果也没有mape，如果你要实现 mape 的对比就要在其他所有的实验代码中加入，并且重新跑其他所有的实验代码（共十个）

+ 实现不同预测步长实验
> 要实现不同的预测步长，也需要重新运行haikou_gen_data_samples.py，重新生成 data_samples文件，才可以。

+ 改进 train.py 实现调用时可以传入关键参数，新写一个脚本调用 train.py，实现运行一次新的脚本，可以实现对于模型的不同参数的实验结果的保存     √

+ 下一步：查找关于对这些多模态辅助信息处理方式的论文

> 目前看到的论文 对于多模态信息的处理都很简单，直接编码。
>
> 有无更好的处理方式？
>
> #### ABSTGCN
>
> 时间、工作日标记和交通事故记录\
>
> + 时间
>
> > 第一个因素是对应于交通流时间戳的时间段（TiD）。考虑这一因素可以更好地区分早晚高峰以及白天和夜间的交通流趋势。==标记方法是将带时间戳的小时数加1再除以24，转换为标准化数据==。
>
> + 第二个因素是对应于交通流时间戳的星期几（DiW），用于区分交通流时间是否为工作日。目的是区分工作日和非工作日交通流的不同特征。
> + 第三个是交通事故标记，用于因交通事故导致的交通流突变。
>
> > 我的数据集中无相关数据
>
> #### MFFSTGCN
>
> 论文中可以先用数据证明这个辅助信息是对交通流有影响的
>
> 消融实验可以一个个的验证辅助数据的作用
>
> + 使用独热编码处理非数值型数据
> + 缺失值处理：线性插值、用前一个或者后一个填充
> + 数据归一化：如z-score归一化、min-max归一化、softmax归一化

+ 辅助信息数据源优化，并且考虑辅助信息影响的时间空间依赖性
  + 获取每个小时的辅助信息数据（与交通流量数据一致的时间间隔）
  + 获取不同的地理位置的辅助信息数据源

+ 输入输出通道数的拓展       ==直接在整个大模型外边使用通道扩展==

> + 仅将 时间卷积模块应用 通道扩展
>
> | 模型\结果             | MAE  | RMSE |
> | --------------------- | ---- | ---- |
> | dilateTconv           | 2.48 | 8.05 |
> | dilateTconv-16channel | 2.26 | 7.07 |
>
> 实验结果明显变好，输入输出通道拓展有明显作用
>
> + 将 通道拓展应用于整个模型
>
> 出现很多问题，训练 10 runs 时出现 OOM ，修改 runs ，先看一下效果如何 再决定是否解决 OOM 问题。
>
> 将 runs 修改为 1，2
>
> | 模型\结果                   | MAE  | RMSE  |
> | --------------------------- | ---- | ----- |
> | dilateTconv                 | 2.48 | 8.05  |
> | dilateTconv-16channel-1runs | 2.35 | 10.59 |
> | dilateTconv-16channel-2runs | 2.41 | 10.75 |
> | dilateTconv-8channel-2runs  | 2.38 | 10.75 |
>
> 

+ 时间注意力和空间注意力的优化方案

+ 原数据 车流量中零很多